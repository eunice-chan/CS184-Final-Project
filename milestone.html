<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Expressive Inverse Kinematics | CS 184 Final Project Milestone Report</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" href="penrosetriangle.svg">
</head>

<body class="sans">
<a href="./index.html">HOME</a> / <a href="./proposal.html">PROPOSAL</a> / <b><a href="#">MILESTONE</a></b> / <a href="./project.html">WRITEUP</a>  / <a href="./demo.html">DEMO</a>
<br />
<br />
<br />
<br />
<h1 class="page-title">Expressive Inverse Kinematics</h1><h1>CS 184 Final Project Milestone Report</h1>
Eunice Chan | <i>August 7, 2020</i>
<br />
<br />
<br />
<!--
This should be about 1 page long if printed. You should briefly summarize what you have accomplished, preliminary results, reflect on progress relative to your plan, and update your work plan as appropriate.
 -->
<p>It has been a week since I started this project, meaning I am now at the halfway point of the project. I will now take a step back and assess my current progress.</p>

<h2>Achievements and Preliminary Results</h2>

<h3>Model</h3>
<p>I went through three iterations of model-creation because of the various challenges I faced.</p>
<ol>
  <li>Blender model ( attempted to export and import as .GLTF and .OBJ )</li>
  <li>Three.js geometry primitive with shaping done by scaling the bones</li>
  <li>Three.js geometry primitive with position calculated and set manually</li>
</ol>
<br />
<table>
  <tr>
    <td>
      <img src="./images/blender_model.png" />
      <figcaption>Blender model</figcaption>
    </td>
    <td>
      <img src="./images/bone_model.png" />
      <figcaption>Bone scaling</figcaption>
    </td>
    <td>
      <img src="./images/geometry_model.png" />
      <figcaption>Manual positioning</figcaption>
    </td>
  </tr>
</table>

<h3>Demo</h3>
<p>I implemented the interactive demo interface. Currently, the demo only has forward kinematics and a moveable target.</p>
<figure>
  <video style="width:100%;padding:0 10%;" preload controls>
      <source src="./images/FK_demo.mov" />
      <p>Your browser doesn't support my video. Here is a <a href="./images/FK_demo.mov">link to the video</a> instead.</p>
  </video>
  <figcaption style="width:100%;padding:0 10%;">Major feature 1: Posing the model</figcaption>
</figure>
<figure>
  <video style="width:100%;padding:0 10%;" preload controls>
      <source src="./images/target_demo.mov" />
      <p>Your browser doesn't support my video. Here is a <a href="./images/target_demo.mov">link to the video</a> instead.</p>
  </video>
  <figcaption style="width:100%;padding:0 10%;">Major feature 2: Moving the target point</figcaption>
</figure>

<h3>IK Helpers</h3>
<figure>
<video style="width:100%;padding:0 10%;" preload controls>
    <source src="./images/point_prediction_demo.mov" />
    <p>Your browser doesn't support my video. Here is a <a href="./images/target_demo.mov">link to the video</a> instead.</p>
    <figcaption>Demo of point prediction and walking through the code</figcaption>
</figure>

<h3>IK Method: Damped Least Squares</h3>
My Descent into Madness, a 4-part comedy

<figure>
  <img src="./images/mydescentintomadnesspt1.jpg" />
  <figcaption>Act 1: Following the verion of the Levenberg-Marquardt algorithm as discussed in <a href="http://www.brnt.eu/publications/brunet2010phd.pdf">here</a>. Got confused and switched to <a href="https://www.researchgate.net/figure/Levenberg-Marquardt-algorithm_fig1_271100201">this</a>.</figcaption>
</figure>
<figure>
  <img src="./images/mydescentintomadnesspt2.png" />
  <figcaption>Act 2: Got frustrated because the details did not seem to be explained clearly enough in the thesis I read, so I read the paper's description more thoroughly.</figcaption>
</figure>
<figure>
  <img src="./images/mydescentintomadnesspt3.png" />
  <figcaption>Manual positioning</figcaption>
</figure>
<figure>
  <img src="./images/mydescentintomadnesspt4.png" />
  <figcaption>Manual positioning</figcaption>
</figure>

<h2>Progress</h2>
<p>I started working on an IK method. However, while working on it, I realized I needed more helper functions (such as the calculation of a child element's new position once a set of rotations and translations are applied to the armature of its parents without actually applying the rotations) so I had to take a detour to work on that. I think the first method would take the longest to implement due to such detours. Once I get that done, the rest would probably not take as long.</p>
<p>It was a little rough understanding it because the way people explained it was oftentimes very ambigious because there was a lot of flexibility in how to implement it. However, this also meant I wasn't 100% sure about the terms or how to specifically calculate things (such as for the Jacobian, since everything was interweaved and I didn't have a mathematical formula for the total effect, I ended up searching online for an example and scaling down my implementation so it would be easier to calculate the Jacobian of the joints) and I had to look at several articles to understand what was necessary and what was specific to each implementation (one of them normalized the parameters. which I wasn't sure if I wanted because I wanted to reach the target point, not be in the direction of the target point.)</p>
<p>It took about three days to do the research for this method. The high level idea was easy to understand, but once I started trying to implement it, a lot of the details tripped me up. From the state I am right now, I may need to implement Cholesky decomposition, which would end up eating up more time. For the other IK goals I had initially planned on doing, depending on how long this one takes, I may one get to one of them. One of them is a selectively damped version so hopefully it won't take as long to understand and the other is SMCM, which is completely different so I would need to look into it more. However, regarding stylizing it, I would need to do much more research into how to stylize and that may be a little difficult to do within the timeframe provided.</p>

<h2>Work Plan Updates</h2>
<p>The most updated version of the work plan is <a href="./proposal.html#schedule">here</a>.</p>
<br />
<p>The <a href="./proposal.html#changelog">changes</a> I have made to the plan are:</p>
<p class="highlight-red_background"><i>August 2 Update</i>: Made forward kinematics a goal. </p>
<p class="highlight-orange_background"><i>August 4 Update</i>: Made SMCM a [goal] and moved the two models to [reach goal]. </p>
<br />
</body>
</html>
